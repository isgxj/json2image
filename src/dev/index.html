<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="index.js"></script>
</head>

<body>
  <div id="app">
    <img id="demoImg" src="" alt="" style="width: 375px; max-width: 100%;">
  </div>
  <div id="t"></div>
  <script>
    var drawFlag = false;
    var imgEl = document.getElementById('demoImg');
    var tipTxtsShare = ['哇！真幸运～', '知识就是力量'];
    console.log(json2image);
    function demo() {
      if (drawFlag) return;
      drawFlag = true;
      var shareTit = [
        {
          bold: 700,
          content: '我答对了 ',
        },
        {
          bold: 700,
          color: '#ED3142',
          content: String(3),
        },
        {
          bold: 700,
          content: ' 题，获得 ',
        },
        {
          bold: 700,
          color: '#ED3142',
          content: String(10),
        },
        {
          bold: 700,
          content: ' 元配捐',
        },
      ];
      var data = {
        width: 750,
        height: 1078,
        color: '#263238',
        bgColor: '#fff',
        elements: [
          {
            type: 'img',
            x: 0,
            y: 0,
            width: 750,
            height: 1079,
            content: 'images/share-bg.jpg',
          },
          {
            type: 'text',
            x: 0,
            y: 0,
            width: 600,
            color: '#071E4A',
            fontSize: 36,
            bold: 700,
            // textAlign: 'right',
            content: '为什么偏下了',
          },
          {
            type: 'text',
            x: 300,
            y: 0,
            width: 600,
            color: '#fff',
            fontSize: 36,
            bold: 700,
            // textAlign: 'right',
            content: 'why not right?',
          },
          {
            type: 'img',
            x: 80,
            y: 382,
            width: 96,
            autoHeight: true,
            content: 'images/avatar.png',
          },
          {
            type: 'text',
            x: 80,
            y: 510,
            width: 600,
            color: '#071E4A',
            fontSize: 36,
            bold: 700,
            // textAlign: 'right',
            content: shareTit,
          },
          {
            type: 'text',
            width: 600,
            x: 80,
            y: 576,
            color: '#3C5A6E',
            fontSize: 32,
            autoHeight: true,
            // textAlign: 'center',
            content: `快来和我一起参与答题挑战，涨公益知识为 projectName 赢爱心配捐。`,
          },
          {
            type: 'text',
            // width: 600,
            x: -80,
            y: 676,
            color: '#3C5A6E',
            fontSize: 32,
            // autoHeight: true,
            textAlign: 'right',
            content: `快来和我一起参与答题挑战`,
          },
          {
            type: 'img',
            x: 352,
            y: 754,
            width: 216,
            height: 74,
            content: 'images/share-tip-bg.png',
          },
          {
            type: 'text',
            x: 376,
            y: 764,
            color: '#ED3142',
            fontSize: 28,
            bold: 700,
            content: tipTxtsShare[parseInt(Math.random() * 2, 10)],
          },
          {
            type: 'img',
            x: 584,
            y: 772,
            width: 96,
            height: 111,
            content: 'images/share-flower.png',
          },
          {
            type: 'img',
            x: 32,
            y: 883,
            width: 686,
            height: 163,
            content: 'images/share-foot-bg.png',
          },
          {
            type: 'text',
            x: 80,
            y: 915,
            color: 'rgba(7,30,74,.7)',
            fontSize: 28,
            content: '长按或扫描二维码参与答题助力',
          },
          {
            type: 'img',
            x: 80,
            y: 972,
            width: 356,
            height: 48,
            content: 'images/share-logo.png',
          },
          {
            type: 'img',
            x: 550,
            y: 904,
            width: 120,
            height: 120,
            content: 'images/share-code.png',
          },
        ],
      };
      json2image(
        data,
        url => {
          // this.shareImgUrl = url;
          imgEl.src = url;
          drawFlag = false;
        },
        err => console.log(err)
      );
    }
    demo();
  </script>
</body>

</html>